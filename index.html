<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debate Hero - ESL è¾¯è«–éŠæˆ²åŒ–å¹³å°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bungee&family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; }
        .game-font { font-family: 'Bungee', cursive; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .card { transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .xp-bar-fill { transition: width 0.5s ease-out; }
        .badge-locked { filter: grayscale(1) opacity(0.3); }
        .badge-unlocked { animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop { 0% { transform: scale(0.5); } 100% { transform: scale(1); } }
        .modal { transition: opacity 0.3s ease-in-out; }
        .bg-violet-gradient { background: linear-gradient(135deg, #7c3aed 0%, #4f46e5 100%); }
    </style>
</head>
<body class="text-slate-800 font-sans">

    <!-- é ‚éƒ¨éŠæˆ²ç‹€æ…‹åˆ— -->
    <div class="bg-slate-900 text-white sticky top-0 z-50 shadow-md">
        <div class="max-w-5xl mx-auto px-4 py-2 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div id="player-level-container" class="bg-indigo-600 rounded-full h-10 w-10 flex items-center justify-center border-2 border-white transition-transform duration-500">
                    <span id="player-level" class="game-font text-lg">1</span>
                </div>
                <div>
                    <div class="text-[10px] uppercase font-bold text-slate-400 leading-none mb-1 text-xs">Level <span id="lvl-display">1</span> Novice</div>
                    <div class="w-24 md:w-48 bg-slate-700 h-2 rounded-full overflow-hidden">
                        <div id="xp-bar" class="xp-bar-fill bg-indigo-400 h-full" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            <div class="flex items-center space-x-4 font-sans font-sans">
                <div class="text-center font-sans">
                    <div id="total-xp" class="game-font text-lg text-yellow-400 font-sans font-sans">0</div>
                    <div class="text-[8px] uppercase font-bold text-slate-400 font-sans">Total XP</div>
                </div>
                <div id="badge-preview" class="hidden md:flex space-x-2">
                    <i class="fas fa-hammer text-slate-500 text-sm badge-locked" id="badge-arel" title="AREL Architect"></i>
                    <i class="fas fa-users text-slate-500 text-sm badge-locked" id="badge-stakeholder" title="Stakeholder Explorer"></i>
                    <i class="fas fa-shield-alt text-slate-500 text-sm badge-locked" id="badge-rebuttal" title="Rebuttal Master"></i>
                    <i class="fas fa-question text-slate-500 text-sm badge-locked" id="badge-poi" title="Interrogator"></i>
                    <i class="fas fa-brain text-slate-500 text-sm badge-locked" id="badge-fallacy" title="Logic Pro"></i>
                    <i class="fas fa-microphone text-slate-500 text-sm badge-locked" id="badge-speech" title="Speech King"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¨™é¡Œ -->
    <header class="bg-indigo-700 text-white py-10 px-4 text-center shadow-inner">
        <h1 class="text-4xl font-extrabold mb-2 game-font tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-white uppercase">Debate Hero</h1>
        <p class="text-indigo-100 italic text-sm font-sans font-sans">Master Logic, Command the Stage</p>
    </header>

    <!-- å°è¦½æ¨™ç±¤ -->
    <nav class="bg-white border-b sticky top-14 z-10 overflow-x-auto shadow-sm">
        <div class="max-w-6xl mx-auto flex whitespace-nowrap">
            <button onclick="showTab('phase1')" class="tab-btn px-5 py-4 font-bold text-indigo-600 border-b-4 border-indigo-600 active" data-target="phase1">1. è«–è­‰ (AREL)</button>
            <button onclick="showTab('phase2')" class="tab-btn px-5 py-4 font-bold text-slate-500 hover:text-indigo-600 transition" data-target="phase2">2. åˆ©å®³é—œä¿‚</button>
            <button onclick="showTab('phase3')" class="tab-btn px-5 py-4 font-bold text-slate-500 hover:text-indigo-600 transition" data-target="phase3">3. åé§</button>
            <button onclick="showTab('phase6')" class="tab-btn px-5 py-4 font-bold text-slate-500 hover:text-indigo-600 transition" data-target="phase6">4. è³ªè©¢</button>
            <button onclick="showTab('phase4')" class="tab-btn px-5 py-4 font-bold text-slate-500 hover:text-indigo-600 transition" data-target="phase4">5. è¬¬èª¤åµæ¢</button>
            <button onclick="showTab('phase5')" class="tab-btn px-5 py-4 font-bold text-slate-500 hover:text-indigo-600 transition" data-target="phase5">6. å³èˆˆæ¼”èªª</button>
        </div>
    </nav>

    <main class="max-w-4xl mx-auto p-4 md:p-8 pb-24 text-slate-800">

        <!-- Phase 1: AREL Builder -->
        <section id="phase1" class="tab-content active">
            <div class="bg-white rounded-2xl shadow-xl p-6 border-2 border-indigo-100">
                <div class="flex justify-between items-start mb-6 font-sans">
                    <h2 class="text-2xl font-bold text-indigo-700">AREL è«–è­‰ç”¢ç”Ÿå™¨</h2>
                    <span class="bg-yellow-100 text-yellow-700 text-xs font-bold px-2 py-1 rounded-full">+50 XP</span>
                </div>
                <div class="mb-8 space-y-4">
                    <div class="bg-slate-50 p-5 rounded-xl border border-slate-200 font-sans">
                        <h3 class="font-bold text-slate-800 mb-2 flex items-center text-sm font-sans font-sans">
                            <i class="fas fa-question-circle mr-2 text-indigo-500"></i> ç‚ºä»€éº¼è¦ç·´ç¿’ AREL çµæ§‹ï¼Ÿ
                        </h3>
                        <p class="text-[13px] text-slate-600 leading-relaxed italic">
                            AREL ç¢ºä¿ä½ çš„ç™¼è¨€ä¸åƒ…åƒ…æ˜¯å€‹äººè§€é»ï¼Œè€Œæ˜¯ç¶“é<b>é‚è¼¯æ¨ç† (Reasoning)</b> ä¸¦æœ‰<b>è­‰æ“š (Evidence)</b> æ”¯æŒçš„å¼·å¤§è«–è­‰ã€‚å®ƒæ˜¯è¾¯è«–çš„ã€Œéª¨æ¶ã€ã€‚
                        </p>
                    </div>
                    <p class="text-xs text-slate-500 font-bold uppercase tracking-widest text-center">é»æ“Šå¡ç‰‡æŸ¥çœ‹ç¯„ä¾‹</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button onclick="openArelModal('uniforms')" class="bg-indigo-50 border-2 border-dashed border-indigo-200 rounded-xl p-4 text-left card hover:bg-indigo-100 transition shadow-sm font-sans font-sans font-sans">
                            <h3 class="font-bold text-indigo-800 mb-1 text-sm font-sans font-sans font-sans"><i class="fas fa-tshirt mr-2"></i> ç¯„ä¾‹ Aï¼šåˆ¶æœæ”¿ç­–</h3>
                            <p class="text-[10px] text-slate-500 font-sans">é»æ“Šå±•é–‹å®Œæ•´é‚è¼¯çµæ§‹...</p>
                        </button>
                        <button onclick="openArelModal('social_media')" class="bg-blue-50 border-2 border-dashed border-blue-200 rounded-xl p-4 text-left card hover:bg-blue-100 transition shadow-sm font-sans font-sans font-sans font-sans">
                            <h3 class="font-bold text-blue-800 mb-1 text-sm font-sans font-sans font-sans font-sans"><i class="fas fa-hashtag mr-2 font-sans"></i> ç¯„ä¾‹ Bï¼šç¤¾ç¾¤åª’é«”</h3>
                            <p class="text-[10px] text-slate-500 font-sans">é»æ“Šå±•é–‹å®Œæ•´é‚è¼¯çµæ§‹...</p>
                        </button>
                    </div>
                </div>
                <div class="space-y-4 text-sm font-sans">
                    <input id="arel-a" type="text" placeholder="Assertion (ä½ çš„æ ¸å¿ƒä¸»å¼µ)..." class="w-full p-3 border-2 border-slate-100 rounded-xl focus:border-indigo-400 outline-none transition font-sans font-sans">
                    <textarea id="arel-r" rows="2" placeholder="Reasoning (ç†ç”±èˆ‡é‚è¼¯)..." class="w-full p-3 border-2 border-slate-100 rounded-xl focus:border-indigo-400 outline-none transition font-sans font-sans"></textarea>
                    <textarea id="arel-e" rows="2" placeholder="Evidence (æ•¸æ“šã€ç ”ç©¶æˆ–å¯¦ä¾‹)..." class="w-full p-3 border-2 border-slate-100 rounded-xl focus:border-indigo-400 outline-none transition font-sans font-sans"></textarea>
                    <input id="arel-l" type="text" placeholder="Link-back (ç¸½çµä¸¦å›æ‰£é¡Œç›®)..." class="w-full p-3 border-2 border-slate-100 rounded-xl focus:border-indigo-400 outline-none transition font-sans font-sans font-sans">
                </div>
                <button onclick="generateAREL()" class="mt-6 w-full bg-indigo-600 text-white font-bold py-4 rounded-xl hover:bg-indigo-700 transition shadow-lg transform active:scale-95 font-sans font-sans font-sans">ç”¢å‡ºå®Œæ•´è«–é»ç¨¿</button>
                <div id="arel-result" class="hidden mt-6 p-6 bg-slate-900 text-indigo-300 rounded-xl relative italic text-lg text-center border-2 border-indigo-500 font-sans font-sans font-sans font-sans font-sans">
                    <p id="arel-text"></p>
                    <button onclick="copyAREL()" class="mt-4 text-sm text-indigo-400 font-bold underline font-sans font-sans font-sans font-sans font-sans">è¤‡è£½åˆ°å‰ªè²¼ç°¿</button>
                </div>
            </div>
        </section>

        <!-- Phase 2: Stakeholders -->
        <section id="phase2" class="tab-content">
            <div class="bg-white rounded-2xl shadow-xl p-6 border-2 border-emerald-100">
                <div class="flex justify-between items-start mb-6 font-sans">
                    <h2 class="text-2xl font-bold text-emerald-700 font-sans">åˆ©å®³é—œä¿‚åˆ†æ</h2>
                    <span class="bg-emerald-100 text-emerald-700 text-xs font-bold px-2 py-1 rounded-full font-sans font-sans">+10 XP</span>
                </div>
                <div class="mb-8 space-y-4">
                    <div class="bg-slate-50 p-5 rounded-xl border border-slate-200">
                        <h3 class="font-bold text-slate-800 mb-2 flex items-center text-sm font-sans font-sans font-sans font-sans">
                            <i class="fas fa-question-circle mr-2 text-emerald-500 font-sans font-sans font-sans font-sans font-sans"></i> ä»€éº¼æ˜¯åˆ©å®³é—œä¿‚äººï¼Ÿ
                        </h3>
                        <p class="text-[13px] text-slate-600 leading-relaxed mb-3">
                            åˆ†ææ”¿ç­–å°ä¸åŒ<b>ç¾¤é«”</b>ç”¢ç”Ÿçš„å½±éŸ¿ã€‚ä»–å€‘å°±åƒä½ æˆ°å ´ä¸Šçš„åµå¯Ÿå…µï¼Œå¹«ä½ æ‰¾å‡ºå—è¡æ“Šçš„ç¾¤é«”ã€‚
                        </p>
                    </div>
                </div>
                <div class="mb-6 relative font-sans">
                    <select id="motion-selector" onchange="updateStakeholders()" class="w-full p-4 border-4 border-emerald-100 rounded-2xl bg-emerald-50 text-emerald-900 font-black outline-none shadow-inner appearance-none text-sm cursor-pointer font-sans font-sans">
                        <option value="edu">1. [æ•™è‚²] å¯¦æ–½æ¯é€±å››å¤©åˆ¶</option>
                        <option value="tech">2. [ç§‘æŠ€] ç¦æ­¢ AI ç”Ÿæˆè—è¡“æ¯”è³½</option>
                        <option value="env">3. [ç’°å¢ƒ] å°è‚‰é¡å¾µæ”¶ã€Œç’°å¢ƒç¨…ã€</option>
                        <option value="econ">4. [ç¶“æ¿Ÿ] æä¾›ç„¡æ¢ä»¶åŸºæœ¬æ”¶å…¥ (UBI)</option>
                        <option value="law">5. [å¸æ³•] é–‹æ”¾é›»è¦–è½‰æ’­æ³•åº­å¯©ç†</option>
                    </select>
                    <div class="absolute right-4 top-[50%] -translate-y-1/2 pointer-events-none text-emerald-700 font-sans font-sans font-sans font-sans"><i class="fas fa-chevron-down text-xs"></i></div>
                </div>
                <div id="stakeholder-grid" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm font-sans font-sans font-sans font-sans font-sans"></div>
                <div id="ref-answer-container" class="mt-8 font-sans font-sans">
                    <button onclick="toggleRef()" id="ref-toggle-btn" class="w-full bg-slate-800 text-white font-bold py-4 rounded-xl shadow-lg uppercase text-xs tracking-widest font-sans font-sans font-sans font-sans">è§£é–å°ˆå®¶åˆ†æ (åƒè€ƒè§£ç­”)</button>
                    <div id="ref-answer-text" class="hidden mt-4 p-5 bg-amber-50 border-2 border-amber-200 rounded-xl text-[13px] leading-relaxed text-slate-700 shadow-inner font-sans font-sans font-sans font-sans font-sans"></div>
                </div>
            </div>
        </section>

        <!-- Phase 3: Rebuttal -->
        <section id="phase3" class="tab-content">
            <div class="bg-white rounded-2xl shadow-xl p-6 border-2 border-rose-100 font-sans">
                <div class="flex justify-between items-start mb-6 font-sans">
                    <h2 class="text-2xl font-bold text-rose-700 font-sans font-sans font-sans">åé§å·¥ä½œåŠ</h2>
                    <span class="bg-rose-100 text-rose-700 text-xs font-bold px-2 py-1 rounded-full font-sans font-sans font-sans font-sans font-sans">+30 XP</span>
                </div>
                <div class="mb-8 bg-slate-50 p-4 rounded-xl border border-slate-200 italic text-slate-600 text-[13px] font-sans">
                    ä½¿ç”¨å››æ­¥æ³•åé§ (Rebuttal)ï¼š1. They Say -> 2. But I Disagree -> 3. Therefore -> 4. Furthermoreã€‚
                </div>
                <div class="bg-slate-900 text-white p-6 rounded-2xl mb-6 shadow-2xl border-l-8 border-rose-500 relative font-sans font-sans font-sans font-sans font-sans font-sans">
                    <select id="rebuttal-topic-selector" onchange="refreshClaim()" class="bg-transparent text-white font-bold border-none outline-none mb-4 text-sm w-full cursor-pointer appearance-none uppercase font-sans font-sans font-sans font-sans font-sans">
                        <option value="edu" class="bg-slate-800">[æ•™è‚²] æ¯é€±å››å¤©åˆ¶</option>
                        <option value="tech" class="bg-slate-800">[ç§‘æŠ€] AI è—è¡“ç«¶è³½</option>
                        <option value="env" class="bg-slate-800">[ç’°å¢ƒ] è‚‰é¡ç’°å¢ƒç¨…</option>
                        <option value="econ" class="bg-slate-800">[ç¶“æ¿Ÿ] åŸºæœ¬æ”¶å…¥ (UBI)</option>
                        <option value="law" class="bg-slate-800">[å¸æ³•] æ³•åº­è½‰æ’­</option>
                    </select>
                    <div class="bg-white/10 p-4 rounded-xl shadow-inner font-sans font-sans font-sans font-sans font-sans"><p id="opponent-claim" class="text-lg italic font-bold font-sans font-sans font-sans font-sans"></p></div>
                </div>
                <textarea id="rebuttal-input" rows="5" placeholder="é‡å°ä¸Šæ–¹è«–é»å¯«ä¸‹ä½ çš„åé§..." class="w-full p-3 border-2 border-slate-100 rounded-xl outline-none mb-4 focus:border-rose-400 transition text-sm font-sans font-sans font-sans font-sans font-sans"></textarea>
                <button onclick="submitRebuttal()" class="w-full bg-rose-600 text-white font-black py-4 rounded-xl shadow-lg uppercase font-sans font-sans font-sans font-sans font-sans font-sans font-sans">æäº¤åé§æŒ‘æˆ°</button>
                <div id="rebuttal-ref-container" class="mt-6 hidden font-sans">
                    <div class="p-5 bg-white border-2 border-rose-200 rounded-2xl shadow-xl font-sans font-sans font-sans font-sans font-sans font-sans font-sans">
                        <h4 class="font-bold text-rose-800 mb-3 text-sm underline decoration-rose-100 italic font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans"><i class="fas fa-check-circle mr-2 font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans"></i> å°ˆå®¶ç´šåé§ç¤ºç¯„</h4>
                        <div id="rebuttal-ref-text" class="space-y-2 text-[13px] text-slate-700 font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Phase 6: Cross-Examination (è³ªè©¢) -->
        <section id="phase6" class="tab-content font-sans">
            <div class="bg-white rounded-2xl shadow-xl p-6 border-2 border-violet-200">
                <div class="flex justify-between items-start mb-6 font-sans">
                    <h2 class="text-2xl font-bold text-violet-700 font-sans">è³ªè©¢ç«¶æŠ€å ´</h2>
                    <span class="bg-violet-100 text-violet-700 text-xs font-bold px-2 py-1 rounded-full font-sans font-sans font-sans font-sans font-sans">+40 XP</span>
                </div>

                <div class="mb-8 space-y-6">
                    <div class="bg-violet-50 p-5 rounded-xl border border-violet-100 font-sans font-sans font-sans font-sans font-sans font-sans">
                        <h3 class="font-bold text-violet-800 mb-2 flex items-center text-sm font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans">
                            <i class="fas fa-gavel mr-2 text-violet-500 font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans"></i> ä»€éº¼æ˜¯ã€Œè³ªè©¢ã€ï¼Ÿ (POI)
                        </h3>
                        <p class="text-[13px] text-slate-600 leading-relaxed font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans">
                            è³ªè©¢ï¼ˆPOIï¼‰æ˜¯è¾¯è«–ä¸­é›™æ–¹æœ€ç›´æ¥äº¤é‹’çš„æ™‚åˆ»ã€‚é€™ä¸åƒ…æ˜¯æå•ï¼Œæ›´æ˜¯ä¸€ç¨®æ”»æ“Šæˆ°ç•¥ã€‚
                            <br><b class="font-sans">æ ¸å¿ƒç›®æ¨™ï¼š</b> å‘è§€çœ¾æ­ç¤ºå°æ–¹çš„é‚è¼¯ç‘•ç–µæˆ–å‰æéŒ¯èª¤ã€‚
                        </p>
                    </div>

                    <!-- æ”»é˜²æ¼”ç¤ºå€ (Expanded to 6 Demos with Translations) -->
                    <div class="space-y-4 font-sans font-sans font-sans font-sans font-sans font-sans">
                        <h3 class="font-bold text-violet-700 text-xs uppercase tracking-widest italic border-b pb-2 font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans">æŠ€å·§æ¼”ç¤ºèˆ‡ç¿»è­¯ (POI Demos)</h3>
                        <div class="grid grid-cols-1 gap-4">
                            
                            <!-- Demo 1: Leading Trap -->
                            <div class="bg-white border-2 border-violet-100 rounded-2xl p-5 shadow-sm font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans">
                                <div class="flex items-center mb-3 font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans"><span class="bg-violet-600 text-white text-[10px] px-2 py-1 rounded font-black mr-2 uppercase">1. Leading Trap (å¼•å°é™·é˜±)</span></div>
                                <div class="bg-indigo-50 p-3 rounded-xl border border-indigo-100 mb-2 text-xs font-sans">
                                    <p class="font-bold">æ­£æ–¹è«–è¿°:</p> "Governments should tax junk food to reduce obesity."
                                    <p class="text-slate-500 mt-1 font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans">ã€Œæ”¿åºœæ‡‰å¾µæ”¶åƒåœ¾é£Ÿç‰©ç¨…ä»¥é™ä½è‚¥èƒ–ç‡ã€‚ã€</p>
                                </div>
                                <div class="bg-rose-50 p-3 rounded-xl border border-rose-100 text-xs font-sans">
                                    <p class="font-bold">åæ–¹è³ªè©¢:</p> "Isn't it true that low-income families rely on junk food? Won't your tax simply punish the poor?"
                                    <p class="text-rose-700 font-bold mt-1">ã€Œä½æ”¶å…¥å®¶åº­ä¾è³´åƒåœ¾é£Ÿç‰©é›£é“ä¸æ˜¯äº‹å¯¦å—ï¼Ÿæ‚¨çš„ç¨…é›£é“ä¸æœƒè®Šæˆç´”ç²¹åœ¨æ‡²ç½°çª®äººå—ï¼Ÿã€</p>
                                </div>
                            </div>

                            <!-- Demo 2: Inconsistency -->
                            <div class="bg-white border-2 border-violet-100 rounded-2xl p-5 shadow-sm">
                                <div class="flex items-center mb-3 font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans"><span class="bg-violet-600 text-white text-[10px] px-2 py-1 rounded font-black mr-2 uppercase font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans">2. Inconsistency (çŸ›ç›¾æ”»æ“Š)</span></div>
                                <div class="bg-indigo-50 p-3 rounded-xl border border-indigo-100 mb-2 text-xs">
                                    <p class="font-bold font-sans font-sans font-sans font-sans">æ­£æ–¹è«–è¿°:</p> "AI art is just a simple tool like a camera."
                                    <p class="text-slate-500 mt-1">ã€ŒAI ç”Ÿæˆå™¨åªæ˜¯åƒç›¸æ©Ÿä¸€æ¨£çš„ç°¡å–®å·¥å…·ã€‚ã€</p>
                                </div>
                                <div class="bg-rose-50 p-3 rounded-xl border border-rose-100 text-xs">
                                    <p class="font-bold font-sans font-sans font-sans font-sans">åæ–¹è³ªè©¢:</p> "If AI is a 'simple tool,' why is the human user awarded as creator when the AI made every creative decision?"
                                    <p class="text-rose-700 font-bold mt-1">ã€Œå¦‚æœ AI åªæ˜¯å·¥å…·ï¼Œç‚ºä»€éº¼ç•¶ AI åšå‡ºæ‰€æœ‰å‰µæ„æ±ºå®šæ™‚ï¼Œäººé¡ä½¿ç”¨è€…å»è¢«é ’ç‚ºå‰µä½œè€…ï¼Ÿã€</p>
                                </div>
                            </div>

                            <!-- Demo 3: Value Trade-off -->
                            <div class="bg-white border-2 border-violet-100 rounded-2xl p-5 shadow-sm">
                                <div class="flex items-center mb-3 font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans"><span class="bg-violet-600 text-white text-[10px] px-2 py-1 rounded font-black mr-2 uppercase font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans">3. Value Trade-off (åƒ¹å€¼æ¬Šè¡¡)</span></div>
                                <div class="bg-indigo-50 p-3 rounded-xl border border-indigo-100 mb-2 text-xs">
                                    <p class="font-bold font-sans">æ­£æ–¹è«–è¿°:</p> "Trial broadcasting ensures transparency and educates the public."
                                    <p class="text-slate-500 mt-1 font-sans">ã€Œå¯©åˆ¤è½‰æ’­èƒ½ç¢ºä¿é€æ˜åº¦ä¸¦æ•™è‚²å¤§çœ¾ã€‚ã€</p>
                                </div>
                                <div class="bg-rose-50 p-3 rounded-xl border border-rose-100 text-xs font-sans">
                                    <p class="font-bold">åæ–¹è³ªè©¢:</p> "Are you willing to sacrifice a defendant's right to a fair trial just for public entertainment?"
                                    <p class="text-rose-700 font-bold mt-1">ã€Œæ‚¨é›£é“é¡˜æ„ç‚ºäº†ã€å¤§çœ¾æ•™è‚²ã€ï¼Œå°±çŠ§ç‰²è¢«å‘Šç²å¾—å…¬å¹³å¯©åˆ¤çš„æ¬Šåˆ©å—ï¼Ÿã€</p>
                                </div>
                            </div>

                            <!-- Demo 4: Reductio ad Absurdum -->
                            <div class="bg-white border-2 border-violet-100 rounded-2xl p-5 shadow-sm">
                                <div class="flex items-center mb-3"><span class="bg-violet-600 text-white text-[10px] px-2 py-1 rounded font-black mr-2 uppercase">4. Reductio (æ­¸è¬¬æ³•)</span></div>
                                <div class="bg-indigo-50 p-3 rounded-xl border border-indigo-100 mb-2 text-xs font-sans">
                                    <p class="font-bold">æ­£æ–¹è«–è¿°:</p> "4-day school weeks are needed because students have too much stress."
                                    <p class="text-slate-500 mt-1">ã€Œæ¯é€±ä¸Šèª²å››å¤©æ˜¯å¿…è¦çš„ï¼Œå› ç‚ºå­¸ç”Ÿå£“åŠ›å¤ªå¤§ã€‚ã€</p>
                                </div>
                                <div class="bg-rose-50 p-3 rounded-xl border border-rose-100 text-xs font-sans">
                                    <p class="font-bold">åæ–¹è³ªè©¢:</p> "If the logic is to remove stress by removing school, why not stop school entirely? Won't that make them even happier?"
                                    <p class="text-rose-700 font-bold mt-1">ã€Œå¦‚æœé‚è¼¯æ˜¯é€éæ¸›å°‘ä¸Šèª²ä¾†æ¸›å£“ï¼Œé‚£ç‚ºä½•ä¸ä¹¾è„†å»¢é™¤å­¸æ ¡ï¼Ÿé‚£æ¨£ä»–å€‘é›£é“ä¸æœƒæ›´å¿«æ¨‚å—ï¼Ÿã€</p>
                                </div>
                            </div>

                            <!-- Demo 5: Burden Shift -->
                            <div class="bg-white border-2 border-violet-100 rounded-2xl p-5 shadow-sm">
                                <div class="flex items-center mb-3"><span class="bg-violet-600 text-white text-[10px] px-2 py-1 rounded font-black mr-2 uppercase">5. Burden Shift (èˆ‰è­‰è²¬ä»»è½‰ç§»)</span></div>
                                <div class="bg-indigo-50 p-3 rounded-xl border border-indigo-100 mb-2 text-xs font-sans">
                                    <p class="font-bold">æ­£æ–¹è«–è¿°:</p> "UBI is a proven way to eliminate poverty globally."
                                    <p class="text-slate-500 mt-1">ã€ŒUBI æ˜¯è¢«è­‰æ˜èƒ½æ¶ˆé™¤å…¨çƒè²§çª®çš„æ–¹å¼ã€‚ã€</p>
                                </div>
                                <div class="bg-rose-50 p-3 rounded-xl border border-rose-100 text-xs font-sans">
                                    <p class="font-bold font-sans">åæ–¹è³ªè©¢:</p> "Can you name a single large-scale country that has successfully implemented UBI long-term without going bankrupt?"
                                    <p class="text-rose-700 font-bold mt-1">ã€Œæ‚¨èƒ½å¦èˆ‰å‡ºä»»ä½•ä¸€å€‹å¤§å‹åœ‹å®¶ï¼Œåœ¨ä¸ç ´ç”¢çš„æƒ…æ³ä¸‹é•·æœŸæˆåŠŸå¯¦æ–½é UBIï¼Ÿã€</p>
                                </div>
                            </div>

                            <!-- Demo 6: Feasibility Attack -->
                            <div class="bg-white border-2 border-violet-100 rounded-2xl p-5 shadow-sm">
                                <div class="flex items-center mb-3 font-sans"><span class="bg-violet-600 text-white text-[10px] px-2 py-1 rounded font-black mr-2 uppercase">6. Feasibility (å¯è¡Œæ€§æ”»æ“Š)</span></div>
                                <div class="bg-indigo-50 p-3 rounded-xl border border-indigo-100 mb-2 text-xs font-sans">
                                    <p class="font-bold">æ­£æ–¹è«–è¿°:</p> "We must ban all plastic to save the sea turtles immediately."
                                    <p class="text-slate-500 mt-1">ã€Œæˆ‘å€‘å¿…é ˆç«‹å³ç¦æ­¢æ‰€æœ‰å¡‘æ–™ä»¥æ‹¯æ•‘æµ·é¾œã€‚ã€</p>
                                </div>
                                <div class="bg-rose-50 p-3 rounded-xl border border-rose-100 text-xs font-sans">
                                    <p class="font-bold font-sans">åæ–¹è³ªè©¢:</p> "How do you provide sterile medical equipment or safe food transport without using plastics? What is your practical alternative?"
                                    <p class="text-rose-700 font-bold mt-1 font-sans font-sans">ã€Œåœ¨ä¸ä½¿ç”¨å¡‘æ–™çš„æƒ…æ³ä¸‹ï¼Œæ‚¨å¦‚ä½•æä¾›ç„¡èŒé†«ç™‚è¨­å‚™æˆ–å®‰å…¨çš„é£Ÿå“é‹è¼¸ï¼Ÿæ‚¨çš„å¯¦éš›æ›¿ä»£æ–¹æ¡ˆæ˜¯ä»€éº¼ï¼Ÿã€</p>
                                </div>
                            </div>

                        </div>
                    </div>

                    <button onclick="openPoiModal()" class="w-full bg-white border-2 border-violet-200 rounded-xl p-6 shadow-sm card flex items-center justify-between group font-sans">
                        <div class="flex items-center font-sans font-sans">
                            <div class="bg-violet-100 h-12 w-12 rounded-full flex items-center justify-center text-violet-600 mr-4 group-hover:bg-violet-600 group-hover:text-white transition font-sans font-sans font-sans font-sans font-sans font-sans font-sans">
                                <i class="fas fa-comments text-lg font-sans font-sans font-sans font-sans font-sans font-sans"></i>
                            </div>
                            <div class="text-left font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans">
                                <h3 class="font-bold text-violet-700 text-sm uppercase tracking-widest font-sans font-sans font-sans font-sans">è³ªè©¢å¸¸ç”¨å¥å‹åº«</h3>
                                <p class="text-[10px] text-slate-500 font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans">æŸ¥çœ‹ï¼šYes/No å•é¡Œã€å¼•å°æå•èˆ‡è¿½å•ç¯„ä¾‹...</p>
                            </div>
                        </div>
                        <i class="fas fa-expand-alt text-violet-300 group-hover:text-violet-500 transition font-sans font-sans font-sans font-sans font-sans font-sans font-sans"></i>
                    </button>
                </div>

                <hr class="mb-8 border-slate-100 font-sans font-sans font-sans font-sans">

                <div class="bg-violet-gradient text-white p-6 rounded-2xl mb-6 shadow-2xl relative overflow-hidden font-sans font-sans font-sans font-sans font-sans font-sans">
                    <div class="absolute -right-4 -bottom-4 opacity-10 text-9xl font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans"><i class="fas fa-bolt font-sans font-sans font-sans font-sans font-sans font-sans"></i></div>
                    <p class="text-[10px] font-black text-violet-200 uppercase mb-1 tracking-[0.2em] italic relative z-10 font-sans font-sans font-sans font-sans font-sans font-sans">Cross-Ex Practice:</p>
                    <select id="poi-topic-selector" onchange="refreshPoi()" class="bg-transparent text-white font-bold border-none outline-none mb-4 text-sm w-full cursor-pointer appearance-none relative z-10 font-sans font-sans font-sans font-sans font-sans font-sans uppercase font-sans font-sans font-sans">
                        <option value="edu" class="bg-violet-800">[æ•™è‚²] åˆ¶æœèƒ½å‰µé€ æ­¸å±¬æ„Ÿ</option>
                        <option value="tech" class="bg-violet-800">[ç§‘æŠ€] ç¤¾ç¾¤åª’é«”é€£çµäº†å…¨ä¸–ç•Œ</option>
                        <option value="env" class="bg-violet-800">[ç’°å¢ƒ] ç¦å¡‘è† è¢‹èƒ½æ‹¯æ•‘æµ·é¾œ</option>
                        <option value="econ" class="bg-violet-800">[ç¶“æ¿Ÿ] UBI èƒ½è®“äººè¿½æ±‚å¤¢æƒ³</option>
                        <option value="law" class="bg-violet-800">[å¸æ³•] æ³•åº­è½‰æ’­èƒ½å¢åŠ é€æ˜åº¦</option>
                    </select>
                    <div class="bg-white/20 p-4 rounded-xl shadow-inner relative z-10 font-sans font-sans font-sans font-sans font-sans border border-white/30 font-sans font-sans">
                        <p class="text-[10px] font-bold text-violet-100 uppercase mb-1 opacity-70 font-sans font-sans">æ­£æ–¹è«–è¿°ç›®æ¨™ (Target Argument):</p>
                        <p id="poi-opponent-claim" class="text-lg italic font-bold leading-snug font-sans font-sans font-sans font-sans font-sans font-sans font-sans"></p>
                    </div>
                </div>

                <textarea id="poi-input" rows="4" placeholder="åœ¨é€™è£¡è¨­è¨ˆä¸€å€‹å°–éŠ³çš„å•é¡Œä¾†è³ªè©¢å°æ‰‹..." class="w-full p-5 border-2 border-slate-100 rounded-2xl outline-none mb-4 focus:border-violet-400 transition text-sm shadow-inner font-sans font-sans font-sans font-sans font-sans font-sans"></textarea>
                <button onclick="submitPoi()" class="w-full bg-violet-600 text-white font-black py-4 rounded-xl shadow-lg transform active:scale-95 transition tracking-widest uppercase font-sans font-sans font-sans font-sans font-sans font-sans">æäº¤è³ªè©¢æŒ‘æˆ°</button>

                <div id="poi-ref-container" class="mt-6 hidden font-sans font-sans font-sans font-sans font-sans">
                    <div class="p-6 bg-violet-50 border-2 border-violet-100 rounded-3xl shadow-xl font-sans font-sans font-sans font-sans font-sans">
                        <h4 class="font-bold text-violet-800 mb-4 text-sm italic flex items-center font-sans font-sans font-sans font-sans font-sans">
                            <i class="fas fa-lightbulb mr-2 text-violet-500 font-sans font-sans font-sans font-sans font-sans font-sans font-sans"></i> å°ˆå®¶å»ºè­°æå•èˆ‡ç­–ç•¥ (Suggested POI)
                        </h4>
                        <div id="poi-ref-content" class="text-[13px] text-slate-700 italic border-l-4 border-violet-300 pl-4 py-2 font-sans font-sans font-sans font-sans font-sans"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Phase 4: Fallacy Detective -->
        <section id="phase4" class="tab-content font-sans">
            <div class="bg-white rounded-2xl shadow-xl p-6 border-2 border-amber-100 text-center font-sans">
                <h2 class="text-2xl font-bold text-amber-700 mb-6 uppercase tracking-wider underline decoration-amber-200 font-sans">è¬¬èª¤åµæ¢</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-3 mb-10 font-sans font-sans font-sans">
                    <button onclick="openFallacyModal('Ad Hominem')" class="p-4 bg-amber-50 border-2 border-amber-100 rounded-xl font-bold text-amber-800 flex flex-col items-center shadow-sm">
                        <i class="fas fa-user-slash mb-1 font-sans"></i> <span class="text-xs font-sans">äººèº«æ”»æ“Š (Ad Hominem)</span>
                    </button>
                    <button onclick="openFallacyModal('Circular Reasoning')" class="p-4 bg-amber-50 border-2 border-amber-100 rounded-xl font-bold text-amber-800 flex flex-col items-center shadow-sm font-sans font-sans">
                        <i class="fas fa-sync-alt mb-1"></i> <span class="text-xs font-sans">å¾ªç’°è«–è­‰ (Circular)</span>
                    </button>
                    <button onclick="openFallacyModal('False Dilemma')" class="p-4 bg-amber-50 border-2 border-amber-100 rounded-xl font-bold text-amber-800 flex flex-col items-center shadow-sm font-sans font-sans">
                        <i class="fas fa-columns mb-1"></i> <span class="text-xs font-sans font-sans">éŒ¯èª¤äºŒåˆ† (Dilemma)</span>
                    </button>
                    <button onclick="openFallacyModal('Red Herring')" class="p-4 bg-amber-50 border-2 border-amber-100 rounded-xl font-bold text-amber-800 flex flex-col items-center shadow-sm font-sans font-sans">
                        <i class="fas fa-fish mb-1"></i> <span class="text-xs font-sans">ç´…é¯¡é­š (Red Herring)</span>
                    </button>
                    <button onclick="openFallacyModal('Slippery Slope')" class="p-4 bg-amber-50 border-2 border-amber-100 rounded-xl font-bold text-amber-800 flex flex-col items-center shadow-sm font-sans font-sans">
                        <i class="fas fa-mountain mb-1"></i> <span class="text-xs font-sans font-sans">æ»‘å¡è¬¬èª¤ (Slope)</span>
                    </button>
                    <button onclick="openFallacyModal('Strawman')" class="p-4 bg-amber-50 border-2 border-amber-100 rounded-xl font-bold text-amber-800 flex flex-col items-center shadow-sm font-sans">
                        <i class="fas fa-ghost mb-1 font-sans"></i> <span class="text-xs font-sans font-sans font-sans">ç¨»è‰äºº (Strawman)</span>
                    </button>
                </div>
                <div class="flex justify-center mb-4 font-sans font-sans font-sans"><span class="bg-amber-100 px-3 py-1 rounded-full text-amber-700 text-xs font-bold shadow-sm font-sans font-sans font-sans">Streak: <span id="streak-val">0</span> ğŸ”¥</span></div>
                <div id="fallacy-q" class="bg-slate-900 text-white p-8 rounded-3xl mb-8 min-h-[140px] flex items-center justify-center italic text-lg border-4 border-slate-700 shadow-2xl font-sans font-sans">Loading...</div>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-2 font-sans font-sans font-sans font-sans font-sans font-sans font-sans">
                    <button onclick="checkFallacy(this, 'Ad Hominem')" class="p-2 border-2 rounded-xl font-bold text-[10px] hover:bg-amber-400 hover:text-white transition uppercase font-sans font-sans">Ad Hominem</button>
                    <button onclick="checkFallacy(this, 'Circular Reasoning')" class="p-2 border-2 rounded-xl font-bold text-[10px] hover:bg-amber-400 hover:text-white transition uppercase text-[9px] font-sans font-sans">Circular</button>
                    <button onclick="checkFallacy(this, 'False Dilemma')" class="p-2 border-2 rounded-xl font-bold text-[10px] hover:bg-amber-400 hover:text-white transition uppercase font-sans font-sans font-sans">False Dilemma</button>
                    <button onclick="checkFallacy(this, 'Red Herring')" class="p-2 border-2 rounded-xl font-bold text-[10px] hover:bg-amber-400 hover:text-white transition uppercase text-[9px] font-sans font-sans font-sans">Red Herring</button>
                    <button onclick="checkFallacy(this, 'Slippery Slope')" class="p-2 border-2 rounded-xl font-bold text-[10px] hover:bg-amber-400 hover:text-white transition uppercase text-[9px] font-sans font-sans font-sans font-sans">Slippery Slope</button>
                    <button onclick="checkFallacy(this, 'Strawman')" class="p-2 border-2 rounded-xl font-bold text-[10px] hover:bg-amber-400 hover:text-white transition uppercase font-sans font-sans font-sans font-sans">Strawman</button>
                </div>
            </div>
        </section>

        <!-- Phase 5: Table Topics -->
        <section id="phase5" class="tab-content font-sans">
            <div class="bg-white rounded-2xl shadow-xl p-6 border-2 border-blue-100 text-center font-sans font-sans font-sans font-sans">
                <h2 class="text-2xl font-bold text-blue-700 mb-4 font-sans font-sans font-sans font-sans uppercase">è¾¯è«–æ¥µé™é‹å‹•ï¼šè…¦å…§é¢¨æš´</h2>
                <div id="random-topic" class="text-2xl font-bold mb-6 italic text-blue-900 leading-relaxed font-sans font-sans font-sans font-sans font-sans">æŒ‰ä¸‹æŠ½é¡Œé–‹å§‹</div>
                <div id="timer-display" class="game-font text-8xl text-blue-500 mb-8 drop-shadow-sm font-sans font-sans font-sans font-sans font-sans leading-none">01:00</div>
                <div class="flex justify-center space-x-4">
                    <button onclick="newTopic()" class="bg-blue-600 text-white px-10 py-4 rounded-full font-black hover:scale-105 shadow-lg transition uppercase font-sans font-sans font-sans font-sans">æŠ½é¡Œ</button>
                    <button id="timer-btn" onclick="toggleTimer()" class="bg-yellow-400 text-slate-900 px-10 py-4 rounded-full font-black disabled:opacity-50 shadow-lg transition uppercase font-sans font-sans font-sans font-sans" disabled>é–‹å§‹</button>
                </div>
            </div>
        </section>
    </main>

    <!-- INFO MODAL -->
    <div id="info-modal" class="fixed inset-0 bg-slate-900/95 z-[100] hidden flex items-center justify-center p-4 modal font-sans font-sans font-sans font-sans">
        <div class="bg-white rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl font-sans font-sans font-sans font-sans font-sans">
            <div id="modal-header" class="sticky top-0 bg-indigo-700 text-white p-6 flex justify-between items-center font-sans font-sans font-sans font-sans font-sans font-sans">
                <div><h3 id="modal-title" class="text-2xl font-bold font-sans font-sans font-sans font-sans font-sans">Title</h3><p id="modal-subtitle" class="text-indigo-100 text-sm italic font-medium font-sans font-sans font-sans font-sans font-sans font-sans font-sans">Subtitle</p></div>
                <button onclick="closeModal()" class="h-10 w-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/40 transition font-sans font-sans font-sans font-sans font-sans font-sans"><i class="fas fa-times font-sans font-sans font-sans font-sans font-sans font-sans"></i></button>
            </div>
            <div id="modal-content" class="p-6 md:p-8 space-y-6 font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans font-sans"></div>
        </div>
    </div>

    <script>
        let state = { xp: 0, level: 1, streak: 0, badges: { arel: false, stakeholder: false, rebuttal: false, poi: false, fallacy: false, speech: false }, currentQ: null };
        const XP_PER_LEVEL = 200;

        // --- DATA ---
        const arelExamples = {
            "uniforms": { title: "Example: School Uniforms", steps: [ { label: "Assertion", en: "Uniforms are mandatory.", zh: "æ‡‰å¼·åˆ¶ç©¿åˆ¶æœã€‚" }, { label: "Reasoning", en: "Equality and focus.", zh: "æå‡å¹³ç­‰èˆ‡å°ˆæ³¨ã€‚" }, { label: "Evidence", en: "60% less bullying study.", zh: "ç ”ç©¶æŒ‡éœ¸å‡Œæ¸›å°‘60%ã€‚" }, { label: "Link-back", en: "Better environment.", zh: "å‰µé€ æ›´å¥½çš„ç’°å¢ƒã€‚" } ] },
            "social_media": { title: "Example: Social Media", steps: [ { label: "Assertion", en: "Restrict SM for minors.", zh: "é™åˆ¶é’å°‘å¹´ä½¿ç”¨ç¤¾ç¾¤ã€‚" }, { label: "Reasoning", en: "Prevents toxic comparison.", zh: "é˜²æ­¢æœ‰å®³æ¯”è¼ƒã€‚" }, { label: "Evidence", en: "70% anxiety rate increase.", zh: "ä½¿ç”¨è€…ç„¦æ…®ç‡ä¸Šå‡70%ã€‚" }, { label: "Link-back", en: "Protect well-being.", zh: "ä¿è­·èº«å¿ƒå¥åº·ã€‚" } ] }
        };

        const poiPatterns = [
            { cat: "1. Yes/No å¼•å°å•é¡Œ", items: [ { en: "Do you agree that safety is the top priority?", zh: "ä½ æ˜¯å¦åŒæ„å®‰å…¨æ˜¯é¦–è¦ä»»å‹™ï¼Ÿ" }, { en: "Is it not true that X causes Y?", zh: "é›£é“ X å°è‡´ Y ä¸æ˜¯äº‹å¯¦å—ï¼Ÿ" } ] },
            { cat: "2. æ­éœ²çŸ›ç›¾", items: [ { en: "If you claim X, why does Y happen?", zh: "å¦‚æœä½ è²ç¨±Xï¼Œé‚£ç‚ºä½•ç™¼ç”ŸYï¼Ÿ" }, { en: "Isn't that inconsistent with your plan?", zh: "é€™é›£é“è·Ÿä½ çš„è¨ˆç•«ä¸çŸ›ç›¾å—ï¼Ÿ" } ] }
        ];

        const stakeholderData = {
            edu: { list: [ { role: "Students", p: "Rest vs Studies." }, { role: "Teachers", p: "Burnout." } ], ref: "æ”¯æŒè€…å¼·èª¿æ•ˆç‡æå‡ï¼›åå°è€…æ“”æ†‚å¼±å‹¢è½å¾Œã€‚" },
            tech: { list: [ { role: "Artists", p: "IP theft." }, { role: "Public", p: "Access." } ], ref: "AI æ˜¯å·¥å…·é‚„æ˜¯æ å¥ªè€…ï¼Ÿé—œéµåœ¨æ–¼åŸå‰µå®šç¾©ã€‚" },
            env: { list: [ { role: "Farmers", p: "Survival." }, { role: "Consumers", p: "Cost." } ], ref: "ç’°å¢ƒç¨…èƒ½å°æ­£ç¿’æ…£ï¼Œä½†å£“è¿«åŸºå±¤ã€‚" },
            econ: { list: [ { role: "Workers", p: "Dignity." }, { role: "Gov", p: "Debt." } ], ref: "UBI æ˜¯å¦æ¿€ç™¼å‰µæ„æˆ–æ¸›å°‘å‹å‹•ï¼Ÿæ¶‰åŠäººæ€§å‹•åŠ›å‡è¨­ã€‚" },
            law: { list: [ { role: "Public", p: "Trust." }, { role: "Defendants", p: "Privacy." } ], ref: "å¯©åˆ¤è½‰æ’­å¯èƒ½å¼•ç™¼æ°‘æ„å¹²é å¸æ³•å…¬æ­£ã€‚" }
        };

        const rebuttalChallenges = {
            edu: { claim: "4-day school weeks lead to students losing focus.", ref: "1. They say focus drops. 2. I disagree: rest boosts focus. 3. Therefore, productivity rises." },
            tech: { claim: "AI art is great because it makes art creation fast.", ref: "1. They say efficient. 2. I disagree: art is about process. 3. Therefore, AI lacks soul." },
            env: { claim: "A meat tax is unfair because it punishes the poor.", ref: "1. They say hit poor. 2. I disagree: revenue can subsidize plant food. 3. Therefore, health improves." },
            econ: { claim: "Universal Basic Income (UBI) will make people lazy.", ref: "1. They say quit jobs. 2. I disagree: start businesses. 3. Therefore, innovation." },
            law: { claim: "Cameras in court turn trials into shows.", ref: "1. They say shows. 2. I disagree: transparency stops corruption. 3. Therefore, justice fairer." }
        };

        const poiChallenges = {
            edu: { claim: "Uniforms create belonging.", ref: "If uniforms create belonging, why do students form cliques based on wealth outside?", strategy: "æ”»æ“Šç¤¾æœƒä¸€è‡´æ€§çš„è¡¨é¢æ•ˆåº¦ã€‚" },
            tech: { claim: "Social media connects everyone instantly.", ref: "If we are connected, why is clinical loneliness at an all-time high?", strategy: "åˆ©ç”¨æ•¸æ“šåè½‰è«–é»æ•ˆç›Šã€‚" },
            env: { claim: "Banning plastic bags saves turtles.", ref: "Isn't it true that 46% of ocean plastic is nets, not bags?", strategy: "è½‰ç§»æ¯”ä¾‹ï¼Œè­‰æ˜æ”¿ç­–å½±éŸ¿åŠ›å¾®å°ã€‚" },
            econ: { claim: "Universal Basic Income lets everyone pursue dreams.", ref: "If everyone pursues dreams, who will do the essential labor jobs?", strategy: "å¯¦å‹™é™·é˜±ï¼šæ­éœ²ç¤¾æœƒé‹ä½œçš„æ¥µç«¯ç¾å¯¦ã€‚" },
            law: { claim: "Cameras ensure transparency.", ref: "Does transparency matter more than a fair trial?", strategy: "å»ºç«‹åƒ¹å€¼è¡çªå…©é›£ã€‚" }
        };

        const fallacyData = {
            "Ad Hominem": { zh: "äººèº«æ”»æ“Š", def: "æ”»æ“Šäººæ ¼è€Œéé‚è¼¯ã€‚", ex1_en: "He smokes; don't listen!", ex1_zh: "ä»–è‡ªå·±ä¹ŸæŠ½è¸ï¼Œåˆ¥è½ä»–çš„ï¼", ex2_en: "Too young to understand.", ex2_zh: "ä½ å¤ªå¹´è¼•äº†ä¸æ‡‚ã€‚" },
            "Circular Reasoning": { zh: "å¾ªç’°è«–è­‰", def: "çµè«–å³ç†ç”±ã€‚", ex1_en: "Free speech is good because expression should be free.", ex1_zh: "è¨€è«–è‡ªç”±å¥½å› è¡¨é”æ‡‰è‡ªç”±ã€‚", ex2_en: "Fake because not real.", ex2_zh: "å‡å› ä¸çœŸã€‚" },
            "False Dilemma": { zh: "éŒ¯èª¤äºŒåˆ†", def: "å‡è£åªæœ‰å…©é¸é …ã€‚", ex1_en: "Buy or walk.", ex1_zh: "è²·æˆ–èµ°è·¯ã€‚", ex2_en: "With us or against us.", ex2_zh: "èˆ‡æˆ‘å€‘åŒåœ¨æˆ–ç‚ºæ•µã€‚" },
            "Red Herring": { zh: "ç´…é¯¡é­š", def: "è½‰ç§»è©±é¡Œã€‚", ex1_en: "Money? Look at sun!", ex1_zh: "å•éŒ¢ï¼Ÿçœ‹å¤ªé™½ï¼", ex2_en: "Late? Air is great!", ex2_zh: "é²åˆ°ï¼Ÿç©ºæ°£å¥½ï¼" },
            "Slippery Slope": { zh: "æ»‘å¡è¬¬èª¤", def: "å°å‹•ä½œå¤§ç½é›£ã€‚", ex1_en: "Skip class, go to jail!", ex1_zh: "ç¿¹èª²ï¼Œæœ€å¾Œåç‰¢ã€‚", ex2_en: "One soda, organ failure.", ex2_zh: "å–æ±½æ°´å°è‡´è¡°ç«­ã€‚" },
            "Strawman": { zh: "ç¨»è‰äºº", def: "æ­ªæ›²ä¸»å¼µæ”»æ“Šå‡ç›®æ¨™ã€‚", ex1_en: "A: Feed cats. B: You hate humans?", ex1_zh: "Aèªªé¤µè²“ï¼ŒBèªªä½ æ¨äººï¼Ÿ", ex2_en: "A: Shorter hours. B: So lazy students?", ex2_zh: "AèªªçŸ­å·¥æ™‚ï¼ŒBèªªä½ æƒ³å­¸ç”Ÿè®Šæ‡¶ï¼Ÿ" }
        };

        const quizPool = [ { q: "Trust law because law!", a: "Circular Reasoning" }, { q: "Skip class, jail!", a: "Slippery Slope" }, { q: "Money? Look at sun!", a: "Red Herring" }, { q: "Wrong because you fool!", a: "Ad Hominem" }, { q: "Ban AI art or humanity dies!", a: "False Dilemma" }, { q: "A: Feed cats. B: You hate humans?", a: "Strawman" } ];

        // --- FUNCTIONS ---
        function addXP(amount) { state.xp += amount; const newLevel = Math.floor(state.xp/XP_PER_LEVEL)+1; if(newLevel>state.level) confetti(); state.level = newLevel; updateUI(); }
        function updateUI() { document.getElementById('total-xp').innerText = state.xp; document.getElementById('lvl-display').innerText = state.level; document.getElementById('player-level').innerText = state.level; document.getElementById('xp-bar').style.width = `${((state.xp%XP_PER_LEVEL)/XP_PER_LEVEL)*100}%`; }
        function showTab(tabId) { 
            const targetTab = document.getElementById(tabId); const targetBtn = document.querySelector(`[data-target="${tabId}"]`);
            if(!targetTab || !targetBtn) return;
            document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active')); 
            document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('text-indigo-600','border-indigo-600','border-b-4')); 
            targetTab.classList.add('active'); targetBtn.classList.add('text-indigo-600','border-indigo-600','border-b-4'); 
            if(tabId==='phase4') loadNewQuestion(); if(tabId==='phase6') refreshPoi(); if(tabId==='phase2') updateStakeholders(); if(tabId==='phase3') refreshClaim();
        }
        function closeModal() { document.getElementById('info-modal').classList.add('hidden'); }
        function openPoiModal() { const c = poiPatterns.map(p=>`<div><h4 class='font-black text-violet-600 uppercase text-[10px]'>${p.cat}</h4>${p.items.map(i=>`<div class='bg-violet-50 p-2 rounded-xl mb-2'><b>"${i.en}"</b><br><small>${i.zh}</small></div>`).join('')}</div>`).join(''); document.getElementById('modal-title').innerText="è³ªè©¢å¥å‹åº«"; document.getElementById('modal-content').innerHTML=c; document.getElementById('info-modal').classList.remove('hidden'); }
        function openFallacyModal(k) { const d = fallacyData[k]; document.getElementById('modal-title').innerText=k; document.getElementById('modal-content').innerHTML=`<p>${d.def}</p><div class='bg-slate-50 p-3 mt-4'><b>Ex 1:</b> ${d.ex1_en}</div><div class='bg-slate-50 p-3 mt-1'><b>Ex 2:</b> ${d.ex2_en}</div>`; document.getElementById('info-modal').classList.remove('hidden'); }
        function openArelModal(k) { const d = arelExamples[k]; document.getElementById('modal-title').innerText=d.title; document.getElementById('modal-content').innerHTML=d.steps.map(s=>`<div class='p-3 border-b font-sans'><b>${s.label}:</b> ${s.en}</div>`).join(''); document.getElementById('info-modal').classList.remove('hidden'); }
        function loadNewQuestion() { state.currentQ = quizPool[Math.floor(Math.random()*quizPool.length)]; document.getElementById('fallacy-q').innerText=`"${state.currentQ.q}"`; }
        function checkFallacy(btn, type) { if(type === state.currentQ.a){ state.streak++; addXP(25); loadNewQuestion(); if(state.streak>=3) unlockBadge('fallacy'); } else { state.streak=0; btn.classList.add('bg-rose-100'); setTimeout(()=>btn.classList.remove('bg-rose-100'),500); } document.getElementById('streak-val').innerText=state.streak; }
        function refreshClaim() { 
            const sel = document.getElementById('rebuttal-topic-selector');
            if(!sel) return;
            document.getElementById('opponent-claim').innerText = `"${rebuttalChallenges[sel.value].claim}"`; 
            document.getElementById('rebuttal-ref-container').classList.add('hidden'); 
        }
        function submitRebuttal() { addXP(30); unlockBadge('rebuttal'); const r = rebuttalChallenges[document.getElementById('rebuttal-topic-selector').value].ref; document.getElementById('rebuttal-ref-text').innerText=r; document.getElementById('rebuttal-ref-container').classList.remove('hidden'); }
        function refreshPoi() { 
            const sel = document.getElementById('poi-topic-selector');
            if(!sel) return;
            document.getElementById('poi-opponent-claim').innerText=`"${poiChallenges[sel.value].claim}"`; 
            document.getElementById('poi-ref-container').classList.add('hidden'); 
        }
        function submitPoi() { 
            addXP(40); unlockBadge('poi'); 
            const d = poiChallenges[document.getElementById('poi-topic-selector').value]; 
            document.getElementById('poi-ref-content').innerHTML=`<div class='bg-white p-3 rounded-xl border mb-2 font-bold'>Suggested Question: ${d.ref}</div><div class='bg-violet-100 p-3 rounded-xl text-sm italic font-sans'>Strategy: ${d.strategy}</div>`; 
            document.getElementById('poi-ref-container').classList.remove('hidden'); 
            confetti({particleCount: 30, colors: ['#7c3aed']});
        }
        function updateStakeholders() { 
            const sel = document.getElementById('motion-selector');
            if(!sel) return;
            const d = stakeholderData[sel.value]; 
            document.getElementById('stakeholder-grid').innerHTML=d.list.map(i=>`<div class='bg-emerald-50 p-4 border rounded-xl shadow-sm'><b>${i.role}</b><p class='text-xs mt-1'>${i.p}</p></div>`).join(''); 
        }
        function toggleRef() { const r=document.getElementById('ref-answer-text'); if(r.classList.contains('hidden')){ r.innerHTML=stakeholderData[document.getElementById('motion-selector').value].ref; r.classList.remove('hidden'); addXP(5); } else r.classList.add('hidden'); }
        function unlockBadge(id) { state.badges[id]=true; const map={arel:0,stakeholder:1,rebuttal:2,poi:3,fallacy:4,speech:5}; const icons=document.querySelectorAll('#badge-preview i'); icons[map[id]].classList.replace('text-slate-500','text-yellow-400'); icons[map[id]].classList.remove('badge-locked'); }
        let timeLeft=60; let timerInterval;
        function newTopic() { document.getElementById('random-topic').innerText="Should AI have human rights?"; document.getElementById('timer-btn').disabled=false; }
        function toggleTimer() { if(timerInterval){ clearInterval(timerInterval); timerInterval=null; } else { timerInterval=setInterval(()=>{ timeLeft--; document.getElementById('timer-display').innerText=`00:${timeLeft.toString().padStart(2,'0')}`; if(timeLeft<=0){ clearInterval(timerInterval); addXP(100); unlockBadge('speech'); } },1000); } }
        function generateAREL() { const a=document.getElementById('arel-a').value; const r=document.getElementById('arel-r').value; if(!a||!r)return alert("Fill A & R!"); document.getElementById('arel-text').innerText=`I firmly believe that ${a}. The reason is that ${r}. Thus, it is clear.`; document.getElementById('arel-result').classList.remove('hidden'); addXP(50); unlockBadge('arel'); }
        function copyAREL() { alert("å·²è¤‡è£½ï¼"); }

        window.onload = () => { 
            updateUI(); 
            loadNewQuestion(); 
            refreshPoi(); 
            updateStakeholders(); 
            refreshClaim();
        };
    </script>
</body>
</html>
